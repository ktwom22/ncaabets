<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Vault - Private Archive</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .vault-container { background-color: #161b22; border-radius: 12px; border: 1px solid #30363d; padding: 30px; margin-top: 50px; }
        .table { color: #c9d1d9; border-color: #30363d; vertical-align: middle; }
        .table-striped>tbody>tr:nth-of-type(odd) { background-color: #1c2128; color: #c9d1d9; }
        .win-badge { color: #3fb950; background: rgba(63, 185, 80, 0.1); padding: 5px 12px; border-radius: 20px; font-weight: bold; border: 1px solid #3fb950; }
        .loss-badge { color: #f85149; background: rgba(248, 81, 73, 0.1); padding: 5px 12px; border-radius: 20px; font-weight: bold; border: 1px solid #f85149; }
        .score-actual { color: #e3b341; font-weight: bold; }
        .stat-card { background: #21262d; border: 1px solid #30363d; border-radius: 8px; padding: 15px; text-align: center; }
        .btn-download { background-color: #238636; border: none; font-weight: 600; }
        .btn-download:hover { background-color: #2ea043; }
    </style>
</head>
<body>

<div class="container pb-5">
    <div class="vault-container shadow-lg">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="h2 mb-1">The Vault</h1>
                <p class="text-muted">Historical performance: Sheet Stats vs ESPN Actuals</p>
            </div>
            <a href="/download" class="btn btn-download btn-lg">Download CSV</a>
        </div>

        <div class="row g-3 mb-5">
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="text-muted small uppercase">TOTAL RECORD</div>
                    <div class="h3 mb-0">{{ stats.wins }}W - {{ stats.losses }}L</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="text-muted small uppercase">WIN RATE</div>
                    <div class="h3 mb-0">{{ stats.rate }}%</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="text-muted small uppercase">TOTAL PICKS</div>
                    <div class="h3 mb-0">{{ records|length }}</div>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Matchup</th>
                        <th>Pick</th>
                        <th>Result</th>
                        <th>Final (ESPN)</th>
                        <th>Sheet Proj</th>
                        <th>Spread</th>
                        <th>Edge</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in records %}
                    <tr>
                        <td class="small">{{ r.Date }}</td>
                        <td class="small text-muted">{{ r.Matchup }}</td>
                        <td class="fw-bold text-white">{{ r.Pick }}</td>
                        <td>
                            <span class="{{ 'win-badge' if r.Result == 'WIN' else 'loss-badge' }}">
                                {{ r.Result }}
                            </span>
                        </td>
                        <td class="score-actual">{{ r.Actual_Score }}</td>
                        <td>{{ r.Proj_A }} - {{ r.Proj_H }}</td>
                        <td>{{ r.Spread }}</td>
                        <td class="fw-bold">{{ r.Edge }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

</body>
</html>