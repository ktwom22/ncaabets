<!DOCTYPE html>
<html>
<head>
    <title>Edge Engine Pro</title>
    <style>
        :root { --must: #ffcc00; --good: #00ffcc; --fade: #888; --bg: #0a0e14; }
        body { background: var(--bg); color: white; font-family: sans-serif; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }

        /* THE CARD */
        .card { background: #1a1f26; border-radius: 12px; padding: 20px; border: 1px solid #333; position: relative; }
        .live-tag { color: #ff4444; font-weight: bold; animation: pulse 1.5s infinite; }

        /* TOOLTIP LOGIC */
        .info-bubble {
            display: inline-block; width: 18px; height: 18px; background: #444;
            border-radius: 50%; text-align: center; font-size: 12px; cursor: help; margin-left: 5px;
        }
        .status-tag {
            padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 12px;
            position: relative; cursor: help;
        }
        .status-tag[data-type="MUST BET"] { background: var(--must); color: black; }
        .status-tag[data-type="GOOD BET"] { background: var(--good); color: black; }
        .status-tag[data-type="FADE"] { background: var(--fade); color: white; }

        /* THE POPUP BUBBLE */
        .status-tag .tooltiptext {
            visibility: hidden; width: 160px; background-color: #333; color: #fff;
            text-align: center; border-radius: 6px; padding: 10px; position: absolute;
            z-index: 1; bottom: 125%; left: 50%; margin-left: -80px; opacity: 0;
            transition: opacity 0.3s; font-weight: normal; font-size: 11px; border: 1px solid #555;
        }
        .status-tag:hover .tooltiptext { visibility: visible; opacity: 1; }

        .score-row { display: flex; justify-content: space-between; margin: 15px 0; border-top: 1px solid #333; padding-top: 10px; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <h1>Edge Engine Dashboard <small>({{ stats.W }}-{{ stats.L }} | {{ stats.PCT }}%)</small></h1>
    <div class="grid">
        {% for game in games %}
        <div class="card">
            <div style="display: flex; justify-content: space-between;">
                <span class="status">{{ game.status }}</span>
                {% if game.is_live %}<span class="live-tag">‚óè LIVE</span>{% endif %}
            </div>

            <h3>{{ game.Matchup }}</h3>

            <div class="score-row">
                <div>
                    <div style="font-size: 10px; color: #888;">SPREAD PICK</div>
                    <strong>{{ game.Pick }} ({{ game.Pick_Spread }})</strong>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 10px; color: #888;">EDGE</div>
                    <span style="color: #00ffcc;">+{{ game.Edge }}</span>
                </div>
            </div>

            <div class="score-row" style="border: none;">
                <div>
                    <div style="font-size: 10px; color: #888;">OVER/UNDER</div>
                    <span class="status-tag" data-type="{{ game.OU_Status }}">
                        {{ game.OU_Status }}
                        <span class="tooltiptext">{{ game.OU_Tip }}</span>
                    </span>
                </div>
                <div style="text-align: right;">
                    <strong>{{ game.OU_Pick }}</strong>
                    <div style="font-size: 10px; color: #888;">PROJ: {{ game.Proj_Total }}</div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</body>
</html>